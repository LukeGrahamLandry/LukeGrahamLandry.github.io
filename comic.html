<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Smol Comic</title>
</head>
<body>
    <nav>
        <a href="/about.html">About</a>
        <a href="/comic.html"> Comic </a>
        <a href="/antiaffirmation.html"> Sarcastic Calender </a>
    </nav>

    <br> <img id="comic" style="width: 100%; display: inline-block;" onerror="shift(-1);">

    <div style="text-align: center;">
        <button onclick="shift(-1);" id="back-btn"> Back </button> <button onclick="shift(1);" id="next-btn"> Next </button>
    </div>

    <script>
        let maxComicIndex = 2;

        let index = parseInt(window.location.hash.substring(1));

        if (location.hash == ""){
            const urlParams = new URLSearchParams(window.location.search);
            index = parseInt(urlParams.get('i'));
        }

        if (isNaN(index)) {
            index = maxComicIndex; // switch this to be the most recent one somehow
        }
        
        function shift(i){
            index = Math.max(0, index + i);
            location.hash = index;
            document.getElementById("comic").src = "/assets/comics/" + index + ".png";

            if (index >= maxComicIndex){
                document.getElementById("next-btn").disabled = true; 
            } else {
                document.getElementById("next-btn").disabled = false; 
            }

            if (index <= 0){
                document.getElementById("back-btn").disabled = true; 
            } else {
                document.getElementById("back-btn").disabled = false; 
            }
        }

        shift(0);
    </script>
</body>
</html>